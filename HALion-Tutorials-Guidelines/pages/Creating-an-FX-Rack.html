<!DOCTYPE HTML>
<html lang="en" class="steinberg-light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Creating an FX Rack - HALion 7.1.30</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="shortcut icon" href="../../resources/favicon/favicon-16x16.png" type="image/png">
        <link rel="shortcut icon" href="../../resources/favicon/favicon-32x32.png" type="image/png">
        <link rel="shortcut icon" href="../../resources/favicon/favicon-192x192.png" type="image/png">
        <link rel="shortcut icon" href="../../resources/favicon/favicon-256x256.png" type="image/png">

        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "steinberg-dark" : "steinberg-light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('steinberg-light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="steinberg-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="steinberg-dark">Dark</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">HALion 7.1.30</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p>/ <a href="../../HALion-Developer-Resource.html">HALion Developer Resource</a> / <a href="./HALion-Tutorials-Guidelines.html">HALion Tutorials &amp; Guidelines</a> / <a href="./Tutorials.html">Tutorials</a> /</p>
<h1 id="creating-an-fx-rack"><a class="header" href="#creating-an-fx-rack">Creating an FX Rack</a></h1>
<hr />
<p><strong>On this page:</strong></p>
<ul>
<li><a href="#example-vst-preset">Example VST Preset</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#workflow-overview">Workflow Overview</a></li>
<li><a href="#adjusting-the-number-of-slots">Adjusting the Number of Slots</a></li>
<li><a href="#adding-further-effects">Adding Further Effects</a>
<ul>
<li><a href="#editing-the-ui-script">Editing the UI Script</a></li>
<li><a href="#editing-the-midi-script">Editing the MIDI Script</a></li>
<li><a href="#modifying-the-effect-selector">Modifying the Effect Selector</a></li>
<li><a href="#creating-a-template-for-the-fx">Creating a Template for the FX</a></li>
</ul>
</li>
<li><a href="#final-example-vst-preset">Final Example VST Preset</a></li>
<li><a href="#how-the-elements-interact">How the Elements Interact</a>
<ul>
<li><a href="#fx-handling">FX Handling</a></li>
<li><a href="#fx-drag-and-drop-handling">FX Drag and Drop Handling</a></li>
</ul>
</li>
<li><a href="#transferring-the-fx-rack-to-your-instrument">Transferring the FX Rack to Your Instrument</a></li>
<li><a href="#fx-rack-with-custom-look">FX Rack with Custom Look</a></li>
</ul>
<hr />
<p>This tutorial describes how to create an FX Rack using a <a href="../../HALion-Macro-Page/pages/Template-List.html">Template List</a>. The FX Rack provides several slots for loading effects using a <a href="./Custom-Multi-Level-Menus-II.html">Custom Multi Level Menu</a>. Furthermore, you can rearrange effects via drag and drop. Subpresets for each effect are managed using the <a href="../../HALion-Macro-Page/pages/Preset-Browser-Custom.html">Preset Browser Custom</a> template.</p>
<p><img src="../images/Creating-an-FX-Rack-4-Slots.png" alt="FX Rack with 4 Slots" /></p>
<blockquote>
<p>‚ùï For an example of an FX Chain instead of an FX Rack, see <a href="./Creating-an-FX-Chain.html">Creating an FX Chain</a>.</p>
</blockquote>
<h2 id="example-vst-preset"><a class="header" href="#example-vst-preset">Example VST Preset</a></h2>
<ul>
<li><a href="../vstpresets/Creating%20an%20FX%20Rack%2001.vstpreset">Creating an FX Rack 01.vstpreset</a></li>
</ul>
<p>The FX Rack in this example uses both UI and MIDI script functionality. The corresponding scripts are provided, but not explained in detail line by line. Instead, the connections and interactions between the UI elements and the UI and MIDI scripts are explained so that you can adjust the number of slots and customize the look of the FX Rack without the risk of introducing errors. See <a href="#how-the-elements-interact">How the Elements Interact</a>.</p>
<p>The following section describes how to access <a href="../../HALion-Macro-Page/pages/Template.html">Templates</a> and edit UI and MIDI scripts.</p>
<ul>
<li>Load <a href="../vstpresets/Creating%20an%20FX%20Rack%2001.vstpreset">Creating an FX Rack 01.vstpreset</a>.</li>
</ul>
<p><strong>To explore the templates in this example:</strong></p>
<ol>
<li>Open the <strong>Macro Page Designer</strong>, go to the <strong>Templates Tree</strong> and select the template that you want to explore.</li>
<li>Click <strong>Edit Element</strong> <img src="../images/EditElement.PNG" alt="Edit Element" /> to examine the template.</li>
</ol>
<p><strong>To edit the UI script:</strong></p>
<ol>
<li>Open the <strong>Macro Page Designer</strong> and select the topmost element in the <strong>GUI Tree</strong>.</li>
<li>Go to the Properties section and click <strong>Edit Script</strong> <img src="../images/EditElement.PNG" alt="Edit Element" /> to open the internal script editor.</li>
</ol>
<p><strong>To edit the MIDI script:</strong></p>
<ol>
<li>In the <strong>Program Tree</strong>, select the FX Rack MIDI Module.</li>
<li>Go to the Sound editor and click <strong>Edit Script</strong> <img src="../images/EditElement.PNG" alt="Edit Element" /> to open the internal script editor.</li>
</ol>
<p>The instructions that follow use the internal script editor.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<ul>
<li>You have an instrument with a macro page.</li>
<li>You have loaded both the preset <a href="../vstpresets/Creating%20an%20FX%20Rack%2001.vstpreset">Creating an FX Rack 01.vstpreset</a> and your instrument into HALion.</li>
</ul>
<h2 id="workflow-overview"><a class="header" href="#workflow-overview">Workflow Overview</a></h2>
<ul>
<li>Adjust the number of slots in the UI script.</li>
<li>Add further effects to the UI and MIDI scripts and create templates for them.</li>
<li>Copy the bus and effects from the <a href="#example-vst-preset">Example VST Preset</a> to your instrument.</li>
<li>Copy the templates and resources from the <a href="#example-vst-preset">Example VST Preset</a> to your macro page.</li>
<li>Copy the code of the UI and MIDI scripts from the <a href="#example-vst-preset">Example VST Preset</a> into the corresponding scripts of your instrument.</li>
<li>Change the look of the FX Rack to match the look of your instrument.</li>
</ul>
<h2 id="adjusting-the-number-of-slots"><a class="header" href="#adjusting-the-number-of-slots">Adjusting the Number of Slots</a></h2>
<p>The FX Rack in the <a href="#example-vst-preset">Example VST Preset</a> has four slots. You can adjust the number of slots in the FX Rack by setting the <code>numFxSlots</code> variable in the UI script to the desired value.</p>
<p>Let's increase the number of slots from four to five:</p>
<ol>
<li>In the <strong>Macro Page Designer</strong>, open the UI script in the internal script editor.</li>
<li>Set the <code>numFxSlots</code> variable to 5.</li>
</ol>
<pre><code class="language-lua">-- FX Rack and effects UI

numFxSlots = 5

</code></pre>
<ol start="3">
<li>Update the UI, for example, by selecting a different program and then returning to the <a href="#example-vst-preset">Example VST Preset</a>. This will rebuild the macro page and apply your changes.</li>
</ol>
<p>The FX Rack should now have five slots on the macro page and in the <strong>Program Tree</strong> structure.</p>
<p><img src="../images/Creating-an-FX-Rack-5-Slots.png" alt="FX Rack with 5 Slots" /></p>
<h2 id="adding-further-effects"><a class="header" href="#adding-further-effects">Adding Further Effects</a></h2>
<p>To add additional effects, you need to edit the UI and MIDI scripts, as well as modify and create the relevant <a href="../../HALion-Macro-Page/pages/Template.html">Templates</a>. Let's add <code>"Tremolo"</code> to the selection of available effects.</p>
<h3 id="editing-the-ui-script"><a class="header" href="#editing-the-ui-script">Editing the UI Script</a></h3>
<ol>
<li>In the <strong>Macro Page Designer</strong>, open the UI script in the internal script editor.</li>
<li>In the <code>fxData</code> table, between <code>"Phaser"</code> and <code>"Distortion"</code>, insert <code>"Tremolo"</code> as Name, and <code>"a"</code> as Bypass ID:</li>
</ol>
<pre><code class="language-lua">fxData = {
	-- Name           Bypass ID(hex)
	{ "None",              "0" },
	{ "Chorus",            "e" },
	{ "Flanger",           "e" },
	{ "Phaser",            "12" },
    { "Tremolo",           "a" }, -- Add this line.
	{ "Distortion",        "14" },
	{ "Bit Crusher",       "14" },
	{ "Delay",             "16" },
	{ "Reverb",            "13" },
}
</code></pre>
<p>The ID of the bypass parameter differs depending on the type of effect. You can look up the ID in hex format in the <strong>Program List</strong>, for example. This information is important when adding other types of effects.</p>
<h3 id="editing-the-midi-script"><a class="header" href="#editing-the-midi-script">Editing the MIDI Script</a></h3>
<ol>
<li>In the <strong>Program Tree</strong>, select the FX Rack MIDI Module and the internal script editor.</li>
<li>Add the following information to the <code>effectDefaults</code> table.</li>
</ol>
<pre><code class="language-lua">Tremolo = {
	output = 0,
	rate = 0.7979797979798,
	syncnote = 0,
	depth = 0.75,
	phase = 1,
	temposync = 0,
},
</code></pre>
<p>The code example above lists only the lines of code that need to be added to the <code>effectDefaults</code> table. The table lists the available effects and their parameters with names and defaults. The normalized range from 0 to 1 is used for the defaults. The defaults will be used when loading an effect.</p>
<blockquote>
<p>‚ùï For a code example on how to write effects and their settings to a table, see <a href="./Snapshot-Effects.html">Snapshot Effects</a>.</p>
</blockquote>
<h3 id="modifying-the-effect-selector"><a class="header" href="#modifying-the-effect-selector">Modifying the Effect Selector</a></h3>
<p>The Select Effect menu is hierarchical. It has submenus for Modulation, Distortion, and Time. Each submenu has its own <a href="../../HALion-Macro-Page/pages/Template.html">Template</a>. First, you need to add the 'Tremolo' menu entry to the Modulation submenu. Then you must increase the OnValues of the subsequent effects in the other submenus by one to match the indices of the arrays and <a href="../../HALion-Script/pages/defineparameter.html#indexed-string-array">Indexed String Array</a> parameters in the UI script.</p>
<ol>
<li>In the <strong>Macro Page Designer</strong>, go to the <strong>Templates Tree</strong> and navigate to</br>'library/FX Rack/PopUps/FX Type/M_FX Type Mod'.</li>
<li>Edit the 'M_FX Type Mod' template.</li>
<li>In the <strong>GUI Tree</strong> copy and paste one of the existing <a href="../../HALion-Macro-Page/pages/Template.html">Templates</a>, e.g. the 'Phaser' template.</li>
<li>Set the <strong>Properties</strong> of the new 'Tremolo' template as follows:</li>
</ol>
<p><img src="../images/Creating-an-FX-Rack-ModSubmenu.png" alt="Modulation Submenu" /></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Property</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Name</td><td style="text-align: left">Tremolo</td></tr>
<tr><td style="text-align: left">Position X</td><td style="text-align: left">1</td></tr>
<tr><td style="text-align: left">Position Y</td><td style="text-align: left">58</td></tr>
<tr><td style="text-align: left">Text</td><td style="text-align: left">Tremolo</td></tr>
<tr><td style="text-align: left">OnValue</td><td style="text-align: left">4</td></tr>
</tbody></table>
</div>
<ol start="5">
<li>Now, edit the 'M_FX Type Dist' and 'M_FX Type Time' templates.</li>
<li>Set the OnValue of the the subsequent effects as follows:</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Template</th><th style="text-align: left">Property</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Distortion</td><td style="text-align: left">OnValue</td><td style="text-align: left">5</td></tr>
<tr><td style="text-align: left">Bit Crusher</td><td style="text-align: left">OnValue</td><td style="text-align: left">6</td></tr>
<tr><td style="text-align: left">Delay</td><td style="text-align: left">OnValue</td><td style="text-align: left">7</td></tr>
<tr><td style="text-align: left">Reverb</td><td style="text-align: left">OnValue</td><td style="text-align: left">8</td></tr>
</tbody></table>
</div>
<h3 id="creating-a-template-for-the-fx"><a class="header" href="#creating-a-template-for-the-fx">Creating a Template for the FX</a></h3>
<p>The Tremolo effect needs an FX panel. Let's create one by reusing an existing effect template.</p>
<ol>
<li>In the <strong>Templates Tree</strong>, go to 'library/FX Rack/FX/Effects'.</li>
<li>Copy and paste an existing effect template to the 'Effects' folder. You can copy any effect template except the 'None' template.</li>
<li>Rename the new template to 'Tremolo' and click <strong>Edit Element</strong> <img src="../images/EditElement.PNG" alt="Edit Element" />.</li>
<li>Adjust the <strong>Properties</strong> of the controls and templates as described below.</li>
</ol>
<p><img src="../images/Creating-an-FX-Rack-Tremolo.png" alt="Tremolo" /></p>
<h4 id="knob-templates"><a class="header" href="#knob-templates">Knob Templates</a></h4>
<p>The knob templates are inside the <a href="../../HALion-Macro-Page/pages/Disable.html">Disable</a> control. The knobs can be configured with template parameters.</p>
<ul>
<li>Set the <strong>Template Parameters</strong> as follows:</li>
</ul>
<p><img src="../images/Creating-an-FX-Rack-Knobs.png" alt="Knob Templates" /></p>
<p><strong>Knob Template HZ</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Template Parameter</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Value</td><td style="text-align: left">@id:0</td></tr>
<tr><td style="text-align: left">Label</td><td style="text-align: left">RATE</td></tr>
<tr><td style="text-align: left">Unit</td><td style="text-align: left">Hz</td></tr>
</tbody></table>
</div>
<p><strong>Knob Template Depth</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Template Parameter</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Value</td><td style="text-align: left">@id:1</td></tr>
<tr><td style="text-align: left">Label</td><td style="text-align: left">DEPTH</td></tr>
</tbody></table>
</div>
<p><strong>Knob Template Mix</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Template Parameter</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Value</td><td style="text-align: left">@id:2</td></tr>
<tr><td style="text-align: left">Label</td><td style="text-align: left">OUTPUT</td></tr>
<tr><td style="text-align: left">Unit</td><td style="text-align: left">dB</td></tr>
</tbody></table>
</div>
<p>Now, the knobs control the effect parameters and display the corresponding parameter names and units.</p>
<h4 id="active-template"><a class="header" href="#active-template">Active Template</a></h4>
<p>The ID of the Bypass parameter must be set.</p>
<ul>
<li>Set the <strong>Template Parameter</strong> of the 'Active' template as follows:</li>
</ul>
<p><img src="../images/Creating-an-FX-Rack-Active.png" alt="Active Template" /></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Template Parameter</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Value</td><td style="text-align: left">@id:a</td></tr>
</tbody></table>
</div>
<h4 id="disable-group"><a class="header" href="#disable-group">Disable Group</a></h4>
<p>The value of the <a href="../../HALion-Macro-Page/pages/Disable.html">Disable</a> group must be set to the same ID as the associated Bypass parameter. The three knobs will be disabled if the effect is bypassed.</p>
<p><img src="../images/Creating-an-FX-Rack-Disable.png" alt="Disable Group" /></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Property</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Value</td><td style="text-align: left">@id:a</td></tr>
</tbody></table>
</div>
<h4 id="label-control"><a class="header" href="#label-control">Label Control</a></h4>
<p>The title of the effect must be changed.</p>
<ul>
<li>Set the <strong>Properties</strong> of the <a href="../../HALion-Macro-Page/pages/Label.html">Label</a> control as follows:</li>
</ul>
<p><img src="../images/Creating-an-FX-Rack-Label.png" alt="Label Control" /></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Property</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Name</td><td style="text-align: left">Tremolo_1</td></tr>
<tr><td style="text-align: left">Text</td><td style="text-align: left">TREMOLO</td></tr>
</tbody></table>
</div>
<h4 id="preset-browser-template"><a class="header" href="#preset-browser-template">Preset Browser Template</a></h4>
<p>The Preset Browser FX Rack template provides the subpreset management for each effect. It can be configured with template parameters.</p>
<ul>
<li>Set the <strong>Template Parameters</strong> as follows:</li>
</ul>
<p><img src="../images/Creating-an-FX-Rack-PresetBrowser.png" alt="Preset Browser" /></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Template Parameters</th><th style="text-align: left">Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Product</td><td style="text-align: left">FX Rack</td></tr>
<tr><td style="text-align: left">Category</td><td style="text-align: left">FX/Tremolo</td></tr>
</tbody></table>
</div>
<p>This way, the Tremolo effect will load and save subpresets from its own location.</p>
<blockquote>
<p>‚ùï The Preset Browser FX Rack template differs from the <a href="../../HALion-Macro-Page/pages/Preset-Browser-Custom.html">Preset Browser Custom</a> template. The main difference is that it omits the Mix parameter when loading an FX subpreset. To keep this functionality, you must use the template from this example instead of the <a href="../../HALion-Macro-Page/pages/Preset-Browser-Custom.html">Preset Browser Custom</a> template.</p>
</blockquote>
<ul>
<li>Finally, update the UI by selecting a different program and then selecting the <a href="#example-vst-preset">Example VST Preset</a> again. This will rebuild the macro page and apply your changes.</li>
</ul>
<p>To add more effects, repeat the steps described above, starting with <a href="#adding-further-effects">Adding Further Effects</a>, and adjust the values to match the particular effect.</p>
<h2 id="final-example-vst-preset"><a class="header" href="#final-example-vst-preset">Final Example VST Preset</a></h2>
<p><img src="../images/Creating-an-FX-Rack-Final.png" alt="Creating an FX Rack Final" /></p>
<p>Here, you can find the Example VST Preset with all the editing steps applied.</p>
<ul>
<li><a href="../vstpresets/Creating%20an%20FX%20Rack%2002.vstpreset">Creating an FX Rack 02.vstpreset</a></li>
</ul>
<h2 id="how-the-elements-interact"><a class="header" href="#how-the-elements-interact">How the Elements Interact</a></h2>
<p>The UI script plays a central role in the FX Rack and controls most of its actions. The comments in the UI script explain which UI elements are connected to script parameters and why they are needed. Reading the comments and looking at the associated UI elements will help you to understand how the FX Rack works. The following screenshot shows the Insert Rack template with its Template Parameters linked to the parameters of the UI script. These script parameters control how the insert rack is displayed on the macro page.</p>
<p><img src="../images/Creating-an-FX-Rack-InsertRack.png" alt="Insert Rack Template" /></p>
<p>The UI script also contains print functions that are commented out. The print functions can be used to track the function calls.</p>
<ol>
<li>Go to the <strong>Macro Page Designer</strong>.</li>
<li>Open the UI script in the internal script editor and remove the comments <code>--</code> before each print function.</li>
<li>To monitor the UI script's output messages, click <strong>Show/Hide Script Output Messages</strong> <img src="../images/ShowHideScriptOutputMessages.png" alt="Show/Hide Script Output Messages" />.</li>
<li>Activate <strong>Test Macro Page</strong> <img src="../images/TestMacroPage-On.PNG" alt="Test Macro Page" />.</li>
<li>Operate the FX Rack in the <strong>Macro Page Designer</strong> (not the <strong>Macro Page Editor</strong>).</li>
</ol>
<blockquote>
<p>‚ùï You must operate the FX Rack in the <strong>Macro Page Designer</strong>, otherwise the output messages will not be correct.</p>
</blockquote>
<p>Below follows a brief description of the connections and the message exchange within the FX Rack.</p>
<h3 id="fx-handling"><a class="header" href="#fx-handling">FX Handling</a></h3>
<ol>
<li>When an effect is loaded into a slot, the UI script's <code>"LoadInserts"..i</code> parameter is changed and the <code>onSelectFX</code> function is called.</li>
<li>The UI script's <code>onSelectFX</code> function sets the MIDI script's <code>selectFx</code> parameter. This calls the <code>onSelectFx</code> function in the MIDI script, which loads the effect on the bus.</li>
<li>After the MIDI script's <code>onSelectFx</code> function has loaded the effect, the <code>sendUpdateBus</code> parameter is set. The MIDI script's <code>sendUpdateBus</code> parameter is connected to the UI script's <code>updateBus</code> parameter.</li>
<li>When the UI script's <code>updateBus</code> parameter is changed, the <code>onBusChanged</code> function is called and the associated parameters and templates of the FX Rack are updated.</li>
<li>After the UI script's <code>onBusChanged</code> function has updated the FX Rack, the <code>onShowInsertChanged</code> function is called. The <code>onShowInsertChanged</code> function sets the scope and the template for the effect panel.</li>
</ol>
<h3 id="fx-drag-and-drop-handling"><a class="header" href="#fx-drag-and-drop-handling">FX Drag and Drop Handling</a></h3>
<ol>
<li>When an effect is dragged and dropped to a new position in the FX Rack, the UI script's <code>onTemplateListDrop</code> function is called.</li>
<li>The UI script's <code>onTemplateListDrop</code> function sets the MIDI script's <code>moveFx</code> parameter. This calls the MIDI script's <code>onMoveFx</code> function, which repositions the effect on the bus.</li>
<li>After the <code>onMoveFx</code> function has moved the effect, the <code>sendUpdateBus</code> parameter is set. The MIDI script's <code>sendUpdateBus</code> parameter is connected to the UI script's <code>updateBus</code> parameter.</li>
</ol>
<p>All other steps are the same as in the <a href="#fx-handling">FX Handling</a> section, starting with step four.</p>
<h2 id="transferring-the-fx-rack-to-your-instrument"><a class="header" href="#transferring-the-fx-rack-to-your-instrument">Transferring the FX Rack to Your Instrument</a></h2>
<p>To integrate the FX Rack into your macro page, you need to do the following:</p>
<ol>
<li>Copy the bus and effects in the <strong>Program Tree</strong>. The Program structure of your instrument must match the structure of the <a href="#example-vst-preset">Example VST Preset</a> and your macro page must be attached to the topmost element in the <strong>Program Tree</strong>.</li>
</ol>
<p><img src="../images/Creating-an-FX-Rack-Bus-FX.png" alt="Program Tree" /></p>
<ol start="2">
<li>Copy all <a href="../../HALion-Macro-Page/pages/Templates.html">Templates</a>. The <a href="../../HALion-Macro-Page/pages/Templates.html">Templates</a> in the <a href="#example-vst-preset">Example VST Preset</a> use <a href="../../HALion-Macro-Page/pages/Resources.html">Resources</a> from the <a href="../../HALion-Macro-Page/pages/Exploring-Templates.html#basic-controls">Basic Controls</a> and <a href="../../HALion-Macro-Page/pages/Exploring-Templates.html#additional-and-vector-controls">Vector Controls</a> library. Later, you can change the <a href="../../HALion-Macro-Page/pages/Resources.html">Resources</a> to match the look of your instrument.</li>
</ol>
<p><img src="../images/Creating-an-FX-Rack-Templates.png" alt="Templates" /></p>
<ol start="3">
<li>Copy the <a href="../../HALion-Macro-Page/pages/Templates.html">Templates</a> from the <strong>GUI Tree</strong> to your macro page.</li>
</ol>
<p><img src="../images/Creating-an-FX-Rack-GUI-Tree.png" alt="GUI Tree" /></p>
<ol start="4">
<li>Copy the code from the UI and MIDI scripts to the respective scripts of your instrument.</li>
<li>Connect the MIDI script's <code>sendUpdateBus</code> parameter with the UI script's <code>updateBus</code> parameter.</li>
</ol>
<p><img src="../images/Creating-an-FX-Rack-updateBus.png" alt="updateBus Parameter" /></p>
<blockquote>
<p>‚ùï The FX Rack will only work if this connection exists.</p>
</blockquote>
<ol start="6">
<li>Finally, update the UI, for example, by selecting a different program and then selecting your instrument again. This will rebuild the macro page and apply your changes.</li>
</ol>
<h2 id="fx-rack-with-custom-look"><a class="header" href="#fx-rack-with-custom-look">FX Rack with Custom Look</a></h2>
<p>You can customize the look and feel of your instrument entirely by using your own <a href="../../HALion-Macro-Page/pages/Resources.html">Resources</a>. As an example, the FX rack of FM Lab is shown in the following screenshot.</p>
<p><img src="../images/Creating-an-FX-Rack-FM-Lab.png" alt="FM Lab" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../HALion-Tutorials-Guidelines/pages/Creating-an-FX-Chain.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../HALion-Tutorials-Guidelines/pages/Using-Attribute-Rules.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>

            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../HALion-Tutorials-Guidelines/pages/Creating-an-FX-Chain.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../HALion-Tutorials-Guidelines/pages/Using-Attribute-Rules.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>
            
            <div id="footer" class="footer">
                <!-- Here comes the footer when available -->
                ¬© 2025 <a href="https://www.steinberg.net" target="_blank">Steinberg Media Technologies GmbH</a>.&nbsp; All rights reserved.&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://o.steinberg.net/en/extras/about.html" target="_blank">About</a> |
                <a href="https://o.steinberg.net/en/extras/privacy_policy.html" target="_blank">Privacy Policy</a> |
                <a href="https://o.steinberg.net/en/extras/terms_conditions.html" target="_blank">Legal Terms</a> 
            </div>
        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../mermaid.min.js"></script>
        <script src="../../mermaid-init.js"></script>


    </div>
    </body>
</html>
